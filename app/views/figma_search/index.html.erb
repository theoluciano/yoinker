<h1>Yoinker: Figma Component Search</h1>

<%= form_with url: figma_search_index_path, method: :get, local: true do %>
  <%= label_tag :component, "Component Name" %>
  <%= text_field_tag :component, params[:component] %>
  <%= submit_tag "Search" %>
<% end %>

<% if defined?(@results) && @results.present? %>
  <h2>Found <%= @results.count %> result(s):</h2>
  <ul>
    <% @results.each do |r| %>
      <li>
        <strong><%= r[:type] %></strong> "<%= r[:name] %>" in <%= r[:file] %> â€”
        <a href="https://www.figma.com/file/<%= r[:file_key] %>?node-id=<%= r[:node_id] %>" target="_blank">Open in Figma</a>
      </li>
    <% end %>
  </ul>
<% elsif params[:component].present? %>
  <p>No matches found.</p>
<% end %>